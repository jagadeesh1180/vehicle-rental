<!DOCTYPE html>
<html>
<head>
  <title>Admin | Bookings</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
</head>

<body class="p-4">

<h3>Bookings</h3>

<table class="table table-striped mt-3">
  <thead class="table-dark">
    <tr>
      <th>User (Phone)</th>
      <th>Vehicle</th>
      <th>Hours</th>
      <th>Total (₹)</th>
    </tr>
  </thead>
  <tbody id="bookingTable"></tbody>
</table>

<script>
fetch("http://localhost:5000/bookings")
  .then(res => res.json())
  .then(data => {
    const table = document.getElementById("bookingTable");
    table.innerHTML = "";

    if (data.length === 0) {
      table.innerHTML = `
        <tr>
          <td colspan="4" class="text-center">
            No bookings found
          </td>
        </tr>
      `;
      return;
    }

    data.forEach(b => {
      table.innerHTML += `
        <tr>
          <td>${b.user_phone || "N/A"}</td>
          <td>${b.vehicle}</td>
          <td>${b.hours}</td>
          <td>₹${b.total}</td>
        </tr>
      `;
    });
  })
  .catch(() => {
    document.getElementById("bookingTable").innerHTML = `
      <tr>
        <td colspan="4" class="text-danger text-center">
          Failed to load bookings
        </td>
      </tr>
    `;
  });
</script>

</body>
</html>
